# robot_sim
```
This is an open robot project, including simulation and control.
The robot is franka panda, which has been simulated in gazebo-11. The
whole project is realized based on ros2-foxy.
```

## robot_description
```
This package realized the function of descriptions of a robot, 
mainly includes ".xacro" files. And the robot model is described 
in urdf form.
```

## gazebo_env
```
This package defined the gazebo simulation model and environment.
```

## robot_info
```
This package defined basic information of a robot. It can be used 
in other packages in the form of dynamic library.
```

## shared_memory
```
This package realized the function of the shared memory operation, 
including writting and reading, and the using method of semaphore.
It can be used in other packages in the form of dynamic library.
```

## gazebo_plugin
```
This package realized a gazebo plugin to operate the robot in gazebo,
including reading and writing. The plugin will communicate with shared
memory.
```

## robot_hw_interface
```
This package realized the function of robot hardware interface
and controler manager. It will communicate with shared memory. Two
dynamic libraries will be generated by this package, and they can be
used as shared library in other packages.
```

## Usage
1. Create a ros2 workspace.
```
mkdir -p ~/franka_robot_ws/src
```

2. Switch to ~/franka_robot_ws/src, and clone the project.
```
cd ~/franka_robot_ws/src
git clone https://github.com/songtangzhong/robot_sim.git
cd robot_sim
mv ./* ../
cd ..
rm -rf robot_sim
```

3. Build the project.
```
cd ~/franka_robot_ws
colcon build
```

4. Export gazebo model and plugin path in ~/.bashrc
```
echo "export GAZEBO_MODEL_PATH=$GAZEBO_MODEL_PATH:~/franka_robot_ws/src/gazebo_env" >> ~/.bashrc
echo "export GAZEBO_PLUGIN_PATH=$GAZEBO_PLUGIN_PATH:~/franka_robot_ws/install/gazebo_env/lib" >> ~/.bashrc
source ~/.bashrc
```

5. Run gazebo simulation.
```
gazebo ~/franka_robot_ws/src/gazebo_env/world/panda.world
This should be run in firstly and shutdown in finally in the whole operation of the project.
```

6. Run ros2 controller manager.
```
ros2 launch robot_hw_interface robot_hw_interface.launch.py
```